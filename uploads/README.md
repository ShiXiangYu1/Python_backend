# 上传文件目录

本目录用于存储用户上传的文件，包括模型文件、数据集和其他临时文件。

## 目录结构

- `models/` - 存储上传的机器学习模型文件
  - 每个模型存储在以其UUID命名的子目录中
  - 包含模型文件、元数据和配置信息

## 使用规则

1. **权限控制**
   - 目录需要正确的读写权限，通常设置为应用容器用户所有
   - 在Docker环境中，此目录会被映射为卷

2. **存储限制**
   - 每个用户的存储空间有限制，详见应用配置
   - 超过限制的上传请求会被拒绝

3. **文件类型限制**
   - 只允许上传指定类型的文件（.h5, .pt, .onnx, .pb等）
   - 所有上传的文件会进行安全扫描

4. **清理策略**
   - 系统会定期清理未使用的临时文件
   - 通过Celery定时任务执行清理操作

## 开发注意事项

- 不要将此目录加入版本控制（已在.gitignore中排除）
- 本地开发时需手动创建此目录及其子目录
- 生产环境应使用持久化存储（如挂载的云存储）

## 文件路径处理

应用程序通过`app/core/config.py`中的配置定义上传目录的路径，并在`app/utils/file_utils.py`中提供文件处理工具函数，包括：

- 安全文件名生成
- 目录路径构建
- 文件类型验证
- 文件大小检查
- 临时文件清理

## 安全注意事项

- 所有上传的文件名会被规范化处理，防止路径遍历攻击
- 文件内容会进行病毒检查（如配置了ClamAV）
- 模型文件会进行安全性验证，防止恶意模型注入 